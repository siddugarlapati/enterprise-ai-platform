apiVersion: v1
kind: ConfigMap
metadata:
  name: ai-platform-config
data:
  APP_NAME: "Enterprise AI Platform"
  APP_VERSION: "1.0.0"
  ENVIRONMENT: "production"
  LOG_LEVEL: "INFO"
  LOG_FORMAT: "json"
  DATABASE_POOL_SIZE: "20"
  DATABASE_MAX_OVERFLOW: "10"
  RATE_LIMIT_REQUESTS: "100"
  RATE_LIMIT_WINDOW: "60"
  CACHE_TTL: "3600"
  DEFAULT_LLM_MODEL: "distilbert-base-uncased"
  EMBEDDING_MODEL: "all-MiniLM-L6-v2"
  MODEL_CACHE_DIR: "/app/model_cache"
---
apiVersion: v1
kind: Secret
metadata:
  name: ai-platform-secrets
type: Opaque
stringData:
  SECRET_KEY: "your-production-secret-key-here"
  DATABASE_URL: "postgresql://user:password@postgres-service:5432/ai_platform"
  REDIS_URL: "redis://redis-service:6379/0"
  CELERY_BROKER_URL: "redis://redis-service:6379/1"
  CELERY_RESULT_BACKEND: "redis://redis-service:6379/2"
  MLFLOW_TRACKING_URI: "http://mlflow-service:5000"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: ai-platform-nginx-config
data:
  nginx.conf: |
    upstream ai_platform {
        least_conn;
        server ai-platform-service:80;
    }
    
    server {
        listen 80;
        server_name _;
        
        location / {
            proxy_pass http://ai_platform;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection 'upgrade';
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_cache_bypass $http_upgrade;
            proxy_read_timeout 300s;
            proxy_connect_timeout 75s;
        }
        
        location /health {
            proxy_pass http://ai_platform/health;
            proxy_http_version 1.1;
        }
    }
